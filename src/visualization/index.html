<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.3.1/dist/echarts.js"></script>
    <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
</head>

<body>
    <!-- 为 ECharts 准备一个定义了宽高的 DOM -->
    <div id="main" style="width: 600px;height:400px;"></div>
    <script type="module">
        var chartDom = document.getElementById('main');
        var myChart = echarts.init(chartDom);
        var option;
        $.getJSON(
            'echarts-data.json',
            function (json) {
                myChart.hideLoading();
                myChart.setOption(
                    (option = {
                        title: {
                            text: 'NPM Dependencies'
                        },
                        animationDurationUpdate: 1500,
                        animationEasingUpdate: 'quinticInOut',
                        series: [
                            {
                                type: 'graph',
                                layout: 'none',
                                legendHoverLink: true,
                                // progressiveThreshold: 700,
                                data: json.nodes.map(function (node) {
                                    return {
                                        x: node.x,
                                        y: node.y,
                                        id: node.id,
                                        name: node.label,
                                        symbolSize: node.size,
                                        itemStyle: {
                                            color: node.color
                                        }
                                    };
                                }),
                                edges: json.edges.map(function (edge) {
                                    return {
                                        source: edge.sourceID,
                                        target: edge.targetID
                                    };
                                }),
                                emphasis: {
                                    focus: 'adjacency',
                                    label: {
                                        position: 'right',
                                        show: true
                                    }
                                },
                                roam: true,
                                lineStyle: {
                                    width: 1,
                                    curveness: 0.3,
                                    opacity: 0.7
                                }
                            }
                        ]
                    }),
                    true
                );
            }
        )
    </script>
</body>

</html>